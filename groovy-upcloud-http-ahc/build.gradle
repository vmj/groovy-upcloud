apply from: '../gradle/java-library.gradle'
apply from: '../gradle/license.gradle'
apply from: '../gradle/groovy.gradle'
apply from: '../gradle/groovydoc.gradle'
apply from: '../gradle/groovydoc-highlightjs.gradle'
apply from: '../gradle/groovydoc-links.gradle'
apply from: '../gradle/spock.gradle'
apply from: '../gradle/jacoco.gradle'
apply from: '../gradle/nexus.gradle'

apply from: '../gradle/logging.gradle'

modifyPom {
    project {
        name 'Groovy UpCloud ahc'
        description 'Groovy UpCloud ahc provides a Apache HttpAsyncClient based HTTP implementation'
    }
}
dependencies {
    api project(':groovy-upcloud-http-spi')
    testImplementation project(':groovy-upcloud-core')

    api "org.apache.httpcomponents:httpasyncclient:$httpasyncclientVersion", {
        exclude module: 'commons-logging'
    }

    // bridge commons-logging to SLF4J
    runtimeOnly "org.slf4j:jcl-over-slf4j:$slf4jVersion"

    // Spock will use this for mocking the abstract CloseableHttpAsyncClient
    testImplementation "cglib:cglib-nodep:$cglibVersion"
}

groovydoc {
    link("https://hc.apache.org/httpcomponents-asyncclient-dev/httpasyncclient/apidocs/", "org.apache.http.nio.client.",
                                                                                          'org.apache.http.impl.nio.')
    link("https://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/",                "org.apache.http.")
}