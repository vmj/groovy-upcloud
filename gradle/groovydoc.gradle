// Augment groovydoc with highlightjs
task highlightjs(type: org.gradle.api.tasks.Copy) {
    from "${rootProject.rootDir}/gradle/highlightjs/highlight.pack.js"
    into "${buildDir}/docs/groovydoc/highlightjs"
}
task highlightstyle(type: org.gradle.api.tasks.Copy) {
    from "${rootProject.rootDir}/gradle/highlightjs/styles/foundation.css"
    into "${buildDir}/docs/groovydoc/highlightjs/styles"
}
sourceSets {
    highlightjs {
        resources {
            srcDir "${rootProject.rootDir}/gradle/groovydoc"
        }
    }
}
groovydoc.dependsOn highlightjs
groovydoc.dependsOn highlightstyle

groovydoc {
    // Java SE 8 APIs
    link("https://docs.oracle.com/javase/8/docs/api/", "java.io", "java.lang", "java.util")
    // Java EE 7 APIs
    link("https://docs.oracle.com/javaee/7/api/", "javax.inject")
    // Groovy APIs
    link("http://docs.groovy-lang.org/docs/groovy-${versions.groovy}/html/gapi/", "groovy.lang")

    ['api', 'app', 'builder', 'core', 'http-ahc', 'http-spi', 'json-gjson', 'json-jackson', 'json-spi', 'resource', 'script'].each {
        //def url = "${rootProject.rootDir}/groovy-upcloud-$it/build/docs/groovydoc/"
        def url = "http://www.javadoc.io/page/${project.group}/groovy-upcloud-${it}/${project.version}/"
        def packageName = "fi.linuxbox.upcloud.${it.replace('-', '.')}"
        link(url, packageName)
    }

    classpath = sourceSets.highlightjs.output + classpath
}
