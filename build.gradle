buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'net.saliman:gradle-cobertura-plugin:2.5.0'
        classpath 'com.bmuschko:gradle-nexus-plugin:2.3.1'
        classpath 'org.asciidoctor:asciidoctor-gradle-plugin:1.5.6'
        classpath "gradle.plugin.nl.javadude.gradle.plugins:license-gradle-plugin:0.14.0"
    }
}

plugins {
    id 'com.gradle.build-scan' version '1.9'
}

buildScan {
    licenseAgreementUrl = 'https://gradle.com/terms-of-service'
    licenseAgree = 'yes'
}

//
// merge coverage reports of subprojects after check
//
apply plugin: 'net.saliman.cobertura'
repositories {
    jcenter() // required to fetch the cobertura dependencies
}
cobertura {
    coverageEncoding = 'UTF-8'
    coverageMergeDatafiles = subprojects.collect {
        // cobertura plugin does not have a constant for this
        file("${it.buildDir.path}/cobertura/cobertura.ser")
    }
}
check.finalizedBy(project.tasks.cobertura)
